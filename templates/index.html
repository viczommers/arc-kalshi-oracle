<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KalshiLink Oracle - ARC Testnet</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ”® KalshiLink Oracle</h1>
            <p class="subtitle">EUR/USD Prediction Market Oracle on ARC Testnet</p>
        </header>

        <div class="wallet-section">
            <button id="connectBtn" class="btn btn-primary">Connect MetaMask</button>
            <div id="walletInfo" class="wallet-info hidden">
                <p><strong>Connected:</strong> <span id="walletAddress"></span></p>
                <p><strong>Network:</strong> <span id="networkName"></span></p>
                <button id="disconnectBtn" class="btn btn-secondary">Disconnect</button>
            </div>
        </div>

        <div class="balance-section">
            <h2>Token Balances</h2>
            <div id="balances" class="balances-grid">
                <div class="balance-card">
                    <h3>USDC</h3>
                    <p class="balance-amount" id="usdcBalance">--</p>
                </div>
                <div class="balance-card">
                    <h3>EURC</h3>
                    <p class="balance-amount" id="eurcBalance">--</p>
                </div>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button id="refreshBalances" class="btn btn-secondary" disabled>Refresh Balances</button>
                <button id="getTokensBtn" class="btn btn-primary" disabled>Get Test Tokens</button>
            </div>
        </div>

        <div class="oracle-section">
            <h2>Submit Oracle Data</h2>
            <form id="oracleForm">
                <div class="form-group">
                    <label for="valueInput">Value (1-99999)</label>
                    <input
                        type="number"
                        id="valueInput"
                        min="1"
                        max="99999"
                        placeholder="e.g., 95000 for 95.000%"
                        required
                    >
                    <small>Percentage * 1000 (e.g., 95000 = 95.000%)</small>
                </div>

                <div class="form-group">
                    <label for="resolutionTimestamp">Resolution Timestamp</label>
                    <input
                        type="datetime-local"
                        id="resolutionTimestamp"
                        required
                    >
                    <small>When the market will resolve</small>
                </div>

                <button type="submit" class="btn btn-primary" id="submitBtn" disabled>
                    Submit Data
                </button>
            </form>

            <div id="result" class="result hidden"></div>
        </div>

        <div class="oracle-info">
            <h2>Oracle Information</h2>
            <div id="oracleDetails" class="info-grid">
                <div class="info-item">
                    <span class="label">Contract:</span>
                    <span id="contractAddress">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="label">Owner:</span>
                    <span id="ownerAddress">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="label">Total Data Points:</span>
                    <span id="totalDataPoints">Loading...</span>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
